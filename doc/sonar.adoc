=== Sonar

See https://medium.com/@rosaniline/setup-sonarqube-with-jenkins-declarative-pipeline-75bccdc9075f[this blog]
and https://medium.com/@theopendle/github-jenkins-sonarqube-integration-for-java-maven-4-4-code-analysis-with-sonarqube-da569db417b6[this one]

==== Initial configuration

. Point you browser to http://127.0.1:9000[http://127.0.1:9000]
. Default loging is admin/admin
+
image::sonar/login.png[]
. You will have to install a few plugins Log in and go to Administration -> Marketplace and install
+
image::sonar/marketplace.png[]
+ Install the plugins.
These are the minimum (You could check with the current installation)
.. Git
.. Clover
+
image::sonar/clover.png[]
+
.. SonarJava
+
image::sonar/java.png[]
.. Findbugs
+
image::sonar/findbugs.png[]
. Restart the server

==== Connect SonarQube with Jenkins

A SonarQube authentication Token is generated by SonarQube

. Go to Administration -> Security -> Users
+
image::sonar/token-1-users.png[SonarQube token generation]
. Click on Tokens and enter a token name
+
image::sonar/sonar-token-2.png[SonarQube token generation]
+
image::sonar/sonar-token-3.png[SonarQube token generation]

Instll Jenkins SonarQube's plugin

. Install the Jenkins plugin
+
image::jenkins/plugin-manager.png[]
+
:figure-caption!:
.SonarQube Scanner
image::sonar/sonarplugin.png[]

Create credentials for SonarQube

. Go to credentials
+
image::sonar/credentials.png[]

. Select global
. Add credentials
+
image::sonar/add-credentials.png[]

. Add credentials as secret text
+
image::sonar/secret-text.png[]

Configure the plugin

. Go to Configure Jenkins
+
image::jenkins/configure-jenkins.png[]

. Configure the plugin
+
image::sonar/sonar-plugin-config.png[Sonar Plugin config]
+
The `sonarqube` name will be used in scripts.

. Configure SonarQube's scanner

.. Go to Manage Jenkins -> Global Tool Configuration
+
image::sonar/global-tool-config.png[]
. SonarQube Scanner
+
Add SonarQube Scanner
+
.The name `sonarquebescanner` will be used in scripts.
image::sonar/sonar-scanner.png[Sonar Scanner config]


